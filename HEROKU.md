Heroku deployment instructions for WhatsApp AI Auto-Reply Bot

This repo is ready to deploy to Heroku with a Chrome/Chromium buildpack so Puppeteer can find a browser binary.

Prerequisites
- Heroku CLI installed and you're logged in (`heroku login`).
- Git access to this repo and a Heroku app created (or permission to create one).

Quick deploy (recommended: jontewks buildpack)

1) Create or select your Heroku app

# Create a new app (optional)
heroku create <app-name>

2) Configure buildpacks (order matters: Chrome first, Node second)

heroku buildpacks:clear -a <app-name>
heroku buildpacks:add --index 1 https://github.com/jontewks/puppeteer-heroku-buildpack -a <app-name>
heroku buildpacks:add --index 2 heroku/nodejs -a <app-name>

(Alternative: use the official Google Chrome buildpack)
heroku buildpacks:clear -a <app-name>
heroku buildpacks:add --index 1 https://github.com/heroku/heroku-buildpack-google-chrome.git -a <app-name>
heroku buildpacks:add --index 2 heroku/nodejs -a <app-name>

3) Set required environment variables

# Path set by the common chrome buildpacks
heroku config:set PUPPETEER_EXECUTABLE_PATH=/app/.apt/usr/bin/google-chrome-stable -a <app-name>

# Prevent Puppeteer from trying to download Chromium during `npm install` (optional)
heroku config:set PUPPETEER_SKIP_DOWNLOAD=true -a <app-name>

# IMPORTANT: set your chat API key or auto-reply will be disabled
heroku config:set CHAT_API_KEY=<your-chat-api-key> -a <app-name>

# Example optional vars
heroku config:set AUTHORIZED_NUMBERS="917864987971,919531976493" -a <app-name>
heroku config:set PUPPETEER_HEADLESS=new -a <app-name>

4) Deploy

# If you haven't already set the heroku git remote, do it now (replace <app-name>):
heroku git:remote -a <app-name>

# Push your main branch
git push heroku main

5) Restart and tail logs

heroku ps:restart -a <app-name>
heroku logs --tail -a <app-name>

Notes & troubleshooting
- If you see an error "Could not find Chrome", run `heroku run bash -a <app-name>` and inspect `/app/.apt/usr/bin` for `google-chrome-stable` or run `which google-chrome-stable`.
- The app uses `LocalAuth` for `whatsapp-web.js`, which stores session data under `.wwebjs_auth/` (this repo already ignores it). Heroku dyno filesystem is ephemeral; when a dyno restarts or you deploy, the session directory will be lost and you'll need to scan the QR again.

Persistence strategies (if you want persistent sessions)
- Use a network-backed storage (S3) or a database to persist the LocalAuth folder and restore files on dyno boot. This requires additional code to upload/download the `.wwebjs_auth` directory on start/exit.
- Use a VM or container provider with persistent filesystem (e.g., DigitalOcean Droplet, AWS EC2, Render with persistent volume).

Memory & stability
- Puppeteer + Chrome requires memory. If your dyno crashes due to OOM, try a larger dyno tier or enable `PERFORMANCE_MODE=true` in `.env`/config which reduces resource consumption.

If you'd like, I can also:
- Generate the exact Heroku CLI commands for your app name.
- Create a small `deploy.sh` script to automate buildpack setup and config (you will still need to run it locally while logged into Heroku).
- Implement S3-backed persistence for LocalAuth (this is non-trivial; I can propose a safe implementation).

---
Generated by an automated repo helper. Update this file if your Heroku workflow changes.
